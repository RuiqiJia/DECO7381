{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <!-- Bootstrap reference:
    "Bootstrap", Bootstrap core team. [Online], Available: https://v3.bootcss.com/javascript/#top -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <style>

        html, body {
            height: 100%;
            width: 100%;
        }

        body {
            background-image: linear-gradient(175deg, #b930fd, #106AD2, #b930fd);
            font-family: Lato;

        }

        .profile-background {
            padding: 10rem 0 2rem 0;
        }

        .profile-wrapper {
            background-color: white;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            height: 76%;
        }

        .profile-header-wrapper {
            position: relative;
            top: 25%;
            color: white;
        }

        .profile-header {
            text-align: center;
        }

        .img-circle {
            border-radius: 50%;
            border: 3px solid;
            width: 140px;
            height: 140px;
        }

        .profile-font {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .profile_description {
            text-align: justify;
            margin: 0 35px;
        }

        .profile-label {
            text-align: center;
            display: flex;
            justify-content: center;
            font-size: 1em;
        }

        .profile-label div {
            margin: 5px 15px;
        }

        .profile-footer {
            text-align: center;
        }

        .profile-footer a {
            width: 80%;
            margin-top: 15px;
            font-size: 1em;
            padding: 10px 0;
            font-weight: bold;
            border-radius: 10px;
        }

        .profile-friend {
            text-align: center;
        }

        .get-back {
            position: absolute;
            top: 5%;
            left: 5%;
        }

        .get-back img {
            width: 35px;
        }

        .profile-info {
            font-size: 1em;
            margin-bottom: 20px;
        }

        .profile-info img {
            width: 25px;
        }

        .info-outer {
            margin: 25px 40px 0 20px;
        }

        .info-outer span,
        .country span,
        .major span {
            color: #797979;
            margin-left: 10px;
        }

        .basic-info-wrapper img {
            width: 25px
        }

        .detail {
            margin-left: 35px;
            margin-bottom: 5px;
            padding: 5px 10px;
            background-color: #d8d8d852;
            border-radius: 10px;
            overflow: scroll;
            font-size: 1.2em;
            font-weight: bold;
            border: 1px solid #e8e8e8;

        }

        .basic-info-wrapper {
            overflow: hidden;
            margin: 0 20px;
            padding-top: 25px
        }

        .country,
        .major {
            float: left;
            width: 50%
        }

        .country-detail,
        .major-detail {
            margin-left: 35px;
            margin-right: 15px;
            padding: 5px 10px;
            background-color: #d8d8d852;
            border-radius: 10px;
            overflow: hidden;
            font-size: 1.2em;
            font-weight: bold;
            border: 1px solid #e8e8e8;
        }

        .sorry-prompt {
            padding-top: 50px;
        }

        .sorry-prompt img {
            width: 80px;
        }

        .prompt-words1,
        .prompt-words2{
            font-size: 1.5em;
        }

        .prompt-words1 {
            margin-top: 10px;
        }

        .prompt-words2 {
            margin-bottom: 10px;
        }

        .user-friends {
            width: 80%;
            margin-top: 15px;
            font-size: 1em;
            padding: 10px 0;
            font-weight: bold;
            border-radius: 10px;
        }

        .new-added {
            display: block;
            margin: 50px auto auto auto;

        }

        .btn-primary {
            background-color: #106AD2;
        }

        .friend-request {
            width: 80%;
            margin-top: 15px;
            margin-left: 42px;
            font-size: 1em;
            padding: 10px 0;
            font-weight: bold;
            border-radius: 10px;
        }

    </style>
</head>
<!--Image reference:
"Major icons", Unknown. [Online]. Available: https://icons8.com/icons/set/major
"Course icons", Unknown. [Online]. Available: https://icons8.com/icons/set/course
"School icons", Unknown. [Online]. Available: https://icons8.com/icons/set/school
"Topic icons", Unknown. [Online]. Available: https://icons8.com/icons/set/topic
 -->

<body>

<!-- profile Header -->
<div class="profile-background">
    <div  class="get-back">
        <a href="javascript:history.go(-1)">
            <img src="{% static 'images/header-back.png' %}" alt="back">
        </a>
    </div>
    <div class="profile-header-wrapper">
        <div class="profile-header">
        {% if user.Picture == '' or user.Picture is None %}
            <img src="{% static 'images/default-user.png' %}" alt="Logo image" class="img-circle">
        {% else %}
            <img src="/images/{{user.Picture}}" alt="Logo image" class="img-circle">
        {% endif %}
        <div class="h1 profile-font">{{ user.username }}</div>
    </div>
        <div class="profile_description">
        <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae vero amet iste nulla labore adipisci expedita earum repudiandae quasi quisquam numquam quo deserunt deleniti obcaecati ipsa, ullam magnam maxime eligendi.</span>
    </div>
    </div>
</div>

<!-- profile body -->
<div class="profile-wrapper">

    <div>
        <div>
            {% if request.user == user or is_friend %}
                <div class="profile-info">

                    <div class="basic-info-wrapper">
                        <div class="country">
                            <div>
                            <img src="{% static 'images/country.png' %}" alt="country">
                            <span>Country</span>
                        </div>
                            <div class="country-detail">{{ user.Country }}</div>
                        </div>
                        <div class="major">
                            <div>
                            <img src="{% static 'images/school.png' %}" alt="major">
                            <span>Major</span>
                        </div>
                            <div class="major-detail">{{ user.Major }}</div>
                        </div>
                    </div>

                    <div class="info-outer">
                        <div>
                            <img src="{% static 'images/course.png' %}" alt="course">
                            <span>Courses</span>
                        </div>
                        <div class="detail">{{ user.Courses }}</div>
                    </div>
                    <div class="info-outer">
                        <div>
                            <img src="{% static 'images/poll.png' %}" alt="topics">
                            <span>Topics</span>
                        </div>
                        <div class="detail">{{ user.Topics }}</div>
                    </div>
                </div>

                {# user edit & sign out buttons #}
                {% if request.user == user %}
                    {% if friend_requests %}
                        <div>
                            <div>
                                <a href="{% url 'requests_page' user.id %}">
                                    <span class="btn btn-primary friend-request">Friend Requests ({{ friend_requests|length }})</span>
                                </a>
                            </div>
                        </div>
                    {% endif %}
                    <div class="profile-footer">
                        <div>
                            <a class="btn btn-primary" href="{% url 'updateProfile' %}">Edit Profile</a>
                        </div>
                
                        <div>
                            <a href="{% url 'friend_list' user.id %}">
                                <div class="btn btn-primary user-friends">
                                    <span class="">Friends ({{ all_friends|length }})</span>
                                </div>
                            </a>
                        </div>
                        <div>
                            <a class="btn btn-danger" href="{% url 'logout' %}">Sign Out</a>
                        </div>
                    </div>
                {% endif %}

            {% else %}
                <div class="basic-info-wrapper">
                    <div class="country">
                        <div>
                            <img src="{% static 'images/country.png' %}" alt="country">
                            <span>Country</span>
                        </div>
                        <div class="country-detail">{{ user.Country }}</div>
                    </div>
                    <div class="major">
                        <div>
                            <img src="{% static 'images/school.png' %}" alt="major">
                            <span>Major</span>
                        </div>
                        <div class="major-detail">{{ user.Major }}</div>
                    </div>
                </div>

                <div class="profile-footer">
                    <div class="sorry-prompt">
                        <img src="{% static 'images/sad.png' %}">
                    </div>
                    <div class="prompt-words1">
                        Woops, You are not friends.
                    </div>
                    <div class="prompt-words2">
                        Please add friend to see more.
                    </div>
                    <div>
                        <a class="btn btn-primary" href="{% url 'send_request' user.id %}">Add Friend</a>
                    </div>
                </div>
            {% endif %}

        </div>

{#        friend-list button    #}

        {% if safe_mode == True and request.user == user %}
            <div class="profile-friend">
                <div>

                    {% if request.user.is_authenticated %}
                        <div>
                            {% if request_sent == 0 %}
                                <div>
                                    <div>
                                        <span class="">Accept</span>
                                        <span class="decline-friend-request material-icons p-1">cancel</span>
                                        <span class="confirm-friend-request material-icons p-1">check</span>
                                    </div>
                                </div>
                            {% endif %}

                            <div>
                                {% if is_friend == False and is_self == False %}
                                    {% if friend_request == 1 %}
                                        <div>
                                            <button class="btn btn-danger" id="cancel_request_btn">
                                                Cancel Request
                                            </button>
                                        </div>
                                    {% endif %} {% endif %} {% if is_friend %}
                                    {% if request.user == user %}
                                <div>
                                    <a href="{% url 'requests_page' user.id %}" class="btn btn-primary" type="button">Friend Requests</a>
                                </div>
                                    {% endif %}

                            {% endif %}

                            </div>

                        </div>
                    {% endif %}
                </div>
            </div>
        {% elif safe_mode == True and request.user != user %}
            {% if is_friend == True %}
                <a href="/chat_box/">
                    <div class="btn btn-primary user-friends new-added">
                        <span>Message</span>
                    </div>
                </a>
            {% endif %}
        {% endif %}

    </div>

</div>



<script src="{% static 'js/jquery-3.6.0.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>

</body>
</html>
